(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},25:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(18),r=n.n(o),i=(n(25),n(19)),s=n(4),u=n(5),c=n(7),d=n(6),h=n(8),m=n(2),E=n.n(m),b=n(3),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={title:"",author:"",description:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"change",value:function(e){this.props.onChange(Object(b.a)({},e.target.name,e.target.value)),this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({name:"",author:"",description:""}),this.props.onUpdateHandle(),this.props.onChange({name:"",author:"",description:""})}},{key:"render",value:function(){var e=this;return l.a.createElement("form",null,l.a.createElement("br",null),l.a.createElement("input",{name:"name",placeholder:"Title",value:this.state.name,onChange:function(t){return e.change(t)}}),l.a.createElement("br",null),l.a.createElement("input",{name:"author",placeholder:"Author",value:this.state.author,onChange:function(t){return e.change(t)}}),l.a.createElement("br",null),l.a.createElement("input",{name:"description",placeholder:"Description",value:this.state.description,onChange:function(t){return e.change(t)}}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(t){return e.onSubmit(t)}},"Submit"))}}]),t}(l.a.Component),f=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).myHeaders={API_KEY:"H10JZ74AT8CBUY57TP87","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},n.state={url:"http://3.9.104.221:5001/",edit:!1,editId:null,details:!1,detailsId:null,books:[],editedBook:{}},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onChange",value:function(e){this.setState({editedBook:Object(i.a)({},this.state.editedBook,{},e)})}},{key:"getData",value:function(){var e=this;E.a.get(this.state.url+"view_books",{headers:this.myHeaders}).then((function(t){e.setState({books:t.data})}))}},{key:"componentDidMount",value:function(){this.getData()}},{key:"onDeleteHandle",value:function(){var e=this;E.a.delete(this.state.url+"book/"+arguments[0],{headers:this.myHeaders}).then((function(t){200==t.status&&e.getData()}))}},{key:"onEditHandle",value:function(){this.setState({edit:!0,editId:arguments[0]})}},{key:"onUpdateHandle",value:function(){var e=this;E.a.patch(this.state.url+"book/"+this.state.editId,this.state.editedBook,{headers:this.myHeaders}).then((function(t){200==t.status?(e.getData(),e.setState({edit:!1,editId:null,editedBook:{}})):console.log("NIE UDA\u0141O SI\u0118 EDYTOWA\u0106 KSI\u0104\u017bKI")}))}},{key:"onAddHandle",value:function(){var e=this;E.a.post(this.state.url+"book",this.state.editedBook,{headers:this.myHeaders}).then((function(t){200==t.status?(e.getData(),e.setState({edit:!1,id:null,editedBook:{}})):console.log("NIE UDA\u0141O SI\u0118 DODA\u0106 KSI\u0104\u017bKI")}))}},{key:"getRentalsData",value:function(e){var t=arguments,n=this;E.a.get(this.state.url+"book/"+e,{headers:this.myHeaders}).then((function(e){n.setState({details:e.data,detailsId:t[0]})}))}},{key:"onDetailsHandle",value:function(){this.getRentalsData(arguments[0])}},{key:"onRentHandle",value:function(){var e=arguments,t=this;E.a.post(this.state.url+"book/"+arguments[0]+"/rent",{},{headers:this.myHeaders}).then((function(n){200==n.status&&(t.getRentalsData(e[0]),console.log("GICIOR KSI\u0104\u017bKA WYPO\u017bYCZONA"))}))}},{key:"onReturnHandle",value:function(){var e=arguments,t=this;E.a.post(this.state.url+"book/"+arguments[0]+"/return",{},{headers:this.myHeaders}).then((function(n){200==n.status&&(t.getRentalsData(e[0]),console.log("GICIOR KSI\u0104\u017bKA ODDANA"))}))}},{key:"detailsRender",value:function(e){if(this.state.details&&e==this.state.detailsId){var t=this.state.details.rentals.map((function(e){return l.a.createElement("tr",{key:e.rental_id},l.a.createElement("td",null,e.rental_id),l.a.createElement("br",null),l.a.createElement("td",null,e.start_date),l.a.createElement("br",null),l.a.createElement("td",null,e.end_date),l.a.createElement("br",null),l.a.createElement("td",null,e.user_id))}));return l.a.createElement("tr",null,l.a.createElement("button",{onClick:this.onRentHandle.bind(this,e)},"Rent"),l.a.createElement("button",{onClick:this.onReturnHandle.bind(this,e)},"Return"),t)}}},{key:"FormRender",value:function(){var e=this;return this.state.edit?l.a.createElement("div",{className:"form"},"Edytowanie",l.a.createElement(k,{onUpdateHandle:function(){return e.onUpdateHandle()},onChange:function(t){return e.onChange(t)}}),l.a.createElement("p",null,JSON.stringify(this.state.editedBook,null,2))):l.a.createElement("div",{className:"form"},"Dodawanie",l.a.createElement(k,{onUpdateHandle:function(){return e.onAddHandle()},onChange:function(t){return e.onChange(t)}}),l.a.createElement("p",null,JSON.stringify(this.state.editedBook,null,2)))}},{key:"render",value:function(){var e=this,t=this.state.books.map((function(t){return l.a.createElement("tr",{key:t.book_id},l.a.createElement("td",null,t.book_id),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.author),l.a.createElement("td",null,t.description),l.a.createElement("td",null,t.user_id),l.a.createElement("td",null,l.a.createElement("button",{onClick:e.onEditHandle.bind(e,t.book_id)},"Edit"),l.a.createElement("button",{onClick:e.onDeleteHandle.bind(e,t.book_id)},"Delete"),l.a.createElement("button",{onClick:e.onDetailsHandle.bind(e,t.book_id)},"Details")),e.detailsRender(t.book_id))}));return l.a.createElement("div",{className:"App-container"},this.FormRender(),this.renderDeleteInfo,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Title"),l.a.createElement("th",null,"Author"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Owner ID"))),l.a.createElement("tbody",null,t)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.810db8fc.chunk.js.map