{"ast":null,"code":"import _objectSpread from\"/app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';//import Todo from './Todo'; \nimport Form from'./Frorm';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.myHeaders={\"API_KEY\":\"H10JZ74AT8CBUY57TP87\"};_this.state={url:'http://localhost:5001/',edit:false,editId:null,details:false,detailsId:null,books:[],editedBook:{}};return _this;}_createClass(App,[{key:\"onChange\",value:function onChange(updatedValue){this.setState({editedBook:_objectSpread({},this.state.editedBook,{},updatedValue)});}},{key:\"getData\",value:function getData(){var _this2=this;axios.get(this.state.url+\"view_books\",{headers:this.myHeaders}).then(function(res){_this2.setState({books:res.data});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"onDeleteHandle\",value:function onDeleteHandle(){var _this3=this;axios.delete(this.state.url+\"book/\"+arguments[0],{headers:this.myHeaders}).then(function(res){if(res.status==200){_this3.getData();}});}},{key:\"onEditHandle\",value:function onEditHandle(){this.setState({edit:true,editId:arguments[0]});}},{key:\"onUpdateHandle\",value:function onUpdateHandle(){var _this4=this;axios.patch(this.state.url+\"book/\"+this.state.editId,this.state.editedBook,{headers:this.myHeaders}).then(function(res){if(res.status==200){_this4.getData();_this4.setState({edit:false,editId:null,editedBook:{}});}else{console.log(\"NIE UDAŁO SIĘ EDYTOWAĆ KSIĄŻKI\");}});}},{key:\"onAddHandle\",value:function onAddHandle(){var _this5=this;axios.post(this.state.url+\"book\",this.state.editedBook,{headers:this.myHeaders}).then(function(res){if(res.status==200){_this5.getData();_this5.setState({edit:false,id:null,editedBook:{}});}else{console.log(\"NIE UDAŁO SIĘ DODAĆ KSIĄŻKI\");}});}},{key:\"onDetailsHandle\",value:function onDetailsHandle(){var _arguments=arguments,_this6=this;axios.get(this.state.url+\"book/\"+arguments[0],{headers:this.myHeaders}).then(function(res){_this6.setState({details:res.data,detailsId:_arguments[0]});});/*this.setState({\n      \n      details: true\n    })*/}},{key:\"detailsRender\",value:function detailsRender(book_id){if(this.state.details&&book_id==this.state.detailsId){var rentals=this.state.details.rentals.map(function(rental){return React.createElement(\"tr\",{key:rental.rental_id},React.createElement(\"td\",null,rental.rental_id),React.createElement(\"br\",null),React.createElement(\"td\",null,rental.start_date),React.createElement(\"br\",null),React.createElement(\"td\",null,rental.end_date),React.createElement(\"br\",null),React.createElement(\"td\",null,rental.user_id));});return rentals;}}},{key:\"FormRender\",value:function FormRender(){var _this7=this;if(this.state.edit){return React.createElement(\"div\",{className:\"form\"},\"Edytowanie\",React.createElement(Form,{onUpdateHandle:function onUpdateHandle(){return _this7.onUpdateHandle();},onChange:function onChange(editedBook){return _this7.onChange(editedBook);}}),React.createElement(\"p\",null,JSON.stringify(this.state.editedBook,null,2)));}else{return React.createElement(\"div\",{className:\"form\"},\"Dodawanie\",React.createElement(Form,{onUpdateHandle:function onUpdateHandle(){return _this7.onAddHandle();},onChange:function onChange(editedBook){return _this7.onChange(editedBook);}}),React.createElement(\"p\",null,JSON.stringify(this.state.editedBook,null,2)));}}},{key:\"render\",value:function render(){var _this8=this;var books=this.state.books.map(function(book){return React.createElement(\"tr\",{key:book.book_id},React.createElement(\"td\",null,book.book_id),React.createElement(\"td\",null,book.name),React.createElement(\"td\",null,book.author),React.createElement(\"td\",null,book.description),React.createElement(\"td\",null,book.user_id),React.createElement(\"td\",null,React.createElement(\"button\",{onClick:_this8.onEditHandle.bind(_this8,book.book_id)},\"Edit\"),React.createElement(\"button\",{onClick:_this8.onDeleteHandle.bind(_this8,book.book_id)},\"Delete\"),React.createElement(\"button\",{onClick:_this8.onDetailsHandle.bind(_this8,book.book_id)},\"Details\")),_this8.detailsRender(book.book_id));});return React.createElement(\"div\",{className:\"App-container\"},this.FormRender(),this.renderDeleteInfo,React.createElement(\"table\",null,React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"#\"),React.createElement(\"th\",null,\"Title\"),React.createElement(\"th\",null,\"Author\"),React.createElement(\"th\",null,\"Description\"),React.createElement(\"th\",null,\"Owner ID\"))),React.createElement(\"tbody\",null,books)));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/app/src/App.js"],"names":["React","Component","axios","Form","App","myHeaders","state","url","edit","editId","details","detailsId","books","editedBook","updatedValue","setState","get","headers","then","res","data","getData","delete","arguments","status","patch","console","log","post","id","book_id","rentals","map","rental","rental_id","start_date","end_date","user_id","onUpdateHandle","onChange","JSON","stringify","onAddHandle","book","name","author","description","onEditHandle","bind","onDeleteHandle","onDetailsHandle","detailsRender","FormRender","renderDeleteInfo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n//import Todo from './Todo'; \nimport Form from './Frorm';\n\nclass App extends Component {\n  \n  myHeaders={\"API_KEY\": \"H10JZ74AT8CBUY57TP87\"}\n  state = {\n    url: 'http://localhost:5001/',\n    edit: false,\n    editId: null,\n    details: false,\n    detailsId: null,\n    books: [],\n    editedBook: {}\n  }\n\n  onChange(updatedValue) {\n    this.setState({\n      editedBook: {\n        ...this.state.editedBook,\n        ...updatedValue\n      }\n    });\n  }\n  getData(){\n    axios.get(this.state.url+\"view_books\", {headers: this.myHeaders}).then(res => {\n      this.setState({\n        books: res.data\n      })\n    });\n  }\n  componentDidMount() {\n    this.getData();\n  }\n  onDeleteHandle() {\n    axios.delete(this.state.url+\"book/\"+arguments[0], {headers: this.myHeaders}).then(res => {\n      if(res.status==200) {\n        this.getData();\n      }\n    })\n  }\n  onEditHandle() {\n    this.setState({\n      edit: true,\n      editId: arguments[0],\n    });\n  }\n  onUpdateHandle() {\n    axios.patch(this.state.url+\"book/\"+this.state.editId, this.state.editedBook, {headers: this.myHeaders}).then(res => {\n      if(res.status==200) {\n        this.getData();\n        this.setState({\n          edit: false,\n          editId: null,\n          editedBook: {}\n        })\n      }\n      else {\n        console.log(\"NIE UDAŁO SIĘ EDYTOWAĆ KSIĄŻKI\")\n      }\n    })\n  }\n  onAddHandle() {\n    axios.post(this.state.url+\"book\", this.state.editedBook, {headers: this.myHeaders}).then(res => {\n      if(res.status==200) {\n        this.getData();\n        this.setState({\n          edit: false,\n          id: null,\n          editedBook: {}\n        })\n      }\n      else {\n        console.log(\"NIE UDAŁO SIĘ DODAĆ KSIĄŻKI\")\n      }\n    })\n  }\n  onDetailsHandle() {\n    axios.get(this.state.url+\"book/\"+arguments[0], {headers: this.myHeaders}).then(res => {\n      this.setState({\n        details: res.data,\n        detailsId: arguments[0],\n      })\n    });\n    /*this.setState({\n      \n      details: true\n    })*/\n  }\n  detailsRender(book_id) {\n    if(this.state.details && book_id == this.state.detailsId) {\n      let rentals = this.state.details.rentals.map((rental) => {\n        return (\n          <tr key={rental.rental_id}>\n            <td>{rental.rental_id}</td>\n            <br />\n            <td>{rental.start_date}</td>\n            <br />\n            <td>{rental.end_date}</td>\n            <br />\n            <td>{rental.user_id}</td> \n          </tr>\n        )\n      });\n      return rentals\n    }\n  }\n  FormRender() {\n    if(this.state.edit) {\n      return (\n        <div className=\"form\">\n          Edytowanie\n          <Form onUpdateHandle={() => this.onUpdateHandle()} onChange={editedBook => this.onChange(editedBook)} />\n          <p>\n            {JSON.stringify(this.state.editedBook,null,2)}\n          </p>\n        </div>\n      )\n    }\n    else {\n      return (\n        <div className=\"form\">\n          Dodawanie\n          <Form onUpdateHandle={() => this.onAddHandle()} onChange={editedBook => this.onChange(editedBook)} />\n          <p>\n            {JSON.stringify(this.state.editedBook,null,2)}\n          </p>\n        </div>\n      )\n\n    }\n  }\n  render() {\n    let books = this.state.books.map((book) => {\n      return (\n        <tr key={book.book_id}>\n          <td>{book.book_id}</td>\n          <td>{book.name}</td>\n          <td>{book.author}</td>\n          <td>{book.description}</td>\n          <td>{book.user_id}</td>\n          <td>\n            <button onClick={this.onEditHandle.bind(this,book.book_id)}>Edit</button>\n            <button onClick={this.onDeleteHandle.bind(this, book.book_id)}>Delete</button>\n            <button onClick={this.onDetailsHandle.bind(this, book.book_id)}>Details</button>\n          </td>\n          {this.detailsRender(book.book_id)}\n        </tr>\n      )\n    });\n    return (\n      \n      <div className=\"App-container\">\n        {this.FormRender()}\n        {this.renderDeleteInfo}\n        <table>\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>Title</th>\n              <th>Author</th>\n              <th>Description</th>\n              <th>Owner ID</th>\n            </tr>\n          </thead>\n          <tbody>\n            {books}\n          </tbody>\n        </table>\n      </div>\n      );\n  }\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}